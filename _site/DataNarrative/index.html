<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2709176-10"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2709176-10'); </script> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Data Narrative | Reward Project Documentation</title><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Data Narrative" /><meta property="og:locale" content="en_US" /><meta name="description" content="Documentation of Reward Data Processing and Analysis" /><meta property="og:description" content="Documentation of Reward Data Processing and Analysis" /><link rel="canonical" href="http://localhost:4000/DataNarrative/" /><meta property="og:url" content="http://localhost:4000/DataNarrative/" /><meta property="og:site_name" content="Reward Project Documentation" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Data Narrative" /> <script type="application/ld+json"> {"url":"http://localhost:4000/DataNarrative/","@type":"WebPage","description":"Documentation of Reward Data Processing and Analysis","headline":"Data Narrative","@context":"https://schema.org"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> Reward Project Documentation </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">Home</a><li class="nav-list-item"><a href="http://localhost:4000/anna/" class="nav-list-link">Legacy Curation (2018-2020)</a><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/projects/neff/neff_index/" class="nav-list-link">NEFF V1 & V2</a><ul class="nav-list "></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/projects/fndm1/fndm1_index/" class="nav-list-link">FNDM1</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/projects/fndm1/datanarrative/" class="nav-list-link">Data Narrative</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/projects/fndm2/fndm2_index/" class="nav-list-link">FNDM2</a><ul class="nav-list "></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/projects/nodra/nodra_index/" class="nav-list-link">Nodra</a><ul class="nav-list "></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/projects/day2/day2_index/" class="nav-list-link">Day2</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/projects/day2/datanarrative/" class="nav-list-link">Data Narrative</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/projects/cogtrain/cogtrain_index/" class="nav-list-link">CogTrain</a><ul class="nav-list "></ul><li class="nav-list-item active"><a href="http://localhost:4000/DataNarrative/" class="nav-list-link active">Data Narrative</a><li class="nav-list-item"><a href="http://localhost:4000/dsr/" class="nav-list-link">Dataset Status Report</a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Reward Project Documentation" aria-label="Search Reward Project Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="//github.com/PennLINC/Reward" class="site-button" > Edit on GitHub </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><div id="main-content" class="main-content" role="main"><h1 id="transfer-process"> <a href="#transfer-process" class="anchor-heading" aria-labelledby="transfer-process"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Transfer Process</h1><p>The data were acquired at the University of Pennsylvania as part of Reward study. Access was given to PennLINC as part of the joint project <em>Discovering Replicable and Robust Brain Activity Differences Between High and Low Discounters</em>.</p><p>The data was transferred from Flywheel to CUBIC using the Flywheel CLI tool and scripts available in <code class="language-plaintext highlighter-rouge">~/working/code/flywheel_transfer</code>.</p><p>The approximate date of transfer was June 14 2021. Before curation on CUBIC, the data in <code class="language-plaintext highlighter-rouge">~/original_data</code> was:</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">!</span><span class="n">du</span> <span class="o">-</span><span class="n">chs</span> <span class="o">~/</span><span class="n">original_data</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>82G	/cbica/projects/wolf_satterthwaite_reward/original_data
82G	total
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">bids</span>
<span class="kn">import</span> <span class="nn">glob</span>

<span class="n">datasets</span> <span class="o">=</span> <span class="n">glob</span><span class="p">.</span><span class="n">glob</span><span class="p">(</span><span class="s">"/cbica/projects/wolf_satterthwaite_reward/original_data/bidsdatasets/*/"</span><span class="p">)</span>
<span class="n">datasets</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="n">x</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">].</span><span class="n">rfind</span><span class="p">(</span><span class="s">'/'</span><span class="p">):]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">datasets</span><span class="p">]</span>
</code></pre></div></div><p>The following sub projects are contained within the dataset:</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">datasets</span><span class="p">]</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>['neff', 'nodra', 'fndm1', 'day2x2', 'fndm2', 'neffx2', 'neff2x2', 'day2']
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dfs</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">datasets</span><span class="p">:</span>
    
    <span class="n">path</span> <span class="o">=</span> <span class="s">'/cbica/projects/wolf_satterthwaite_reward/original_data/bidsdatasets/'</span> <span class="o">+</span> <span class="n">x</span>
    <span class="n">layout</span> <span class="o">=</span> <span class="n">bids</span><span class="p">.</span><span class="n">BIDSLayout</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">dfs</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">layout</span><span class="p">.</span><span class="n">to_df</span><span class="p">())</span>
    
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="n">projects</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">concat</span><span class="p">(</span><span class="n">dfs</span><span class="p">)</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/cbica/projects/wolf_satterthwaite_reward/miniconda3/envs/reward/lib/python3.8/site-packages/bids/layout/models.py:148: FutureWarning: The 'extension' entity currently excludes the leading dot ('.'). As of version 0.14.0, it will include the leading dot. To suppress this warning and include the leading dot, use `bids.config.set_option('extension_initial_dot', True)`.
  warnings.warn("The 'extension' entity currently excludes the leading dot ('.'). "
</code></pre></div></div><p>The project has the following number of subjects:</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">projects</span><span class="p">.</span><span class="n">subject</span><span class="p">))</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>304
</code></pre></div></div><p>Across this range of sessions:</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">set</span><span class="p">(</span><span class="n">projects</span><span class="p">.</span><span class="n">session</span><span class="p">)</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'day2', 'day2x2', 'fndm1', 'fndm2', nan, 'neff', 'neff2x2', 'neffx2', 'nodra'}
</code></pre></div></div><p>The following datatypes were available (with the number of files of the type shown below):</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">projects</span><span class="p">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'suffix'</span><span class="p">).</span><span class="n">size</span><span class="p">()</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>suffix
T1w             876
T2w               6
bold           4314
description       8
dwi              12
magnitude1      846
magnitude2      846
phase1          640
phase2          630
phasediff       220
sbref           298
dtype: int64
</code></pre></div></div><p>The imaging data was organised in BIDS and not anonymized at the time of transfer.</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fields</span> <span class="o">=</span> <span class="s">"""Acknowledgements
AcquisitionDateTime
AcquisitionMatrixPE
AcquisitionNumber
AcquisitionTime
Authors
BIDSVersion
BandwidthPerPixelPhaseEncode
BaseResolution
CoilString
ConversionSoftware
ConversionSoftwareVersion
DatasetDOI
DeidentificationMethod
DerivedVendorReportedEchoSpacing
DeviceSerialNumber
DwellTime
EchoNumber
EchoTime
EchoTime1
EchoTime2
EchoTrainLength
EffectiveEchoSpacing
FlipAngle
Funding
HowToAcknowledge
ImageOrientationPatientDICOM
ImageType
ImagingFrequency
InPlanePhaseEncodingDirectionDICOM
InstitutionAddress
InstitutionName
InstitutionalDepartmentName
IntendedFor
InversionTime
License
MRAcquisitionType
MagneticFieldStrength
Manufacturer
ManufacturersModelName
Modality
Name
ParallelReductionFactorInPlane
PartialFourier
PatientPosition
PatientSex
PercentPhaseFOV
PhaseEncodingDirection
PhaseEncodingSteps
PhaseResolution
PixelBandwidth
ProcedureStepDescription
ProtocolName
PulseSequenceDetails
ReceiveCoilName
ReconMatrixPE
RefLinesPE
ReferencesAndLinks
RepetitionTime
SAR
ScanOptions
ScanningSequence
SequenceName
SequenceVariant
SeriesDescription
SeriesInstanceUID
SeriesNumber
ShimSetting
SliceThickness
SliceTiming
SoftwareVersions
SpacingBetweenSlices
StationName
StudyID
StudyInstanceUID
TaskName
TotalReadoutTime
TxRefAmp
template
Acknowledgements
AcquisitionDateTime
AcquisitionMatrixPE
AcquisitionNumber
AcquisitionTime
Authors
BIDSVersion
BaseResolution
ConversionSoftware
ConversionSoftwareVersion
DatasetDOI
DeidentificationMethod
DeviceSerialNumber
EchoTime
FlipAngle
Funding
HowToAcknowledge
ImageOrientationPatientDICOM
ImageType
ImagingFrequency
InPlanePhaseEncodingDirectionDICOM
InstitutionAddress
InstitutionName
InversionTime
License
MRAcquisitionType
MagneticFieldStrength
Manufacturer
ManufacturersModelName
Modality
Name
PartialFourier
PatientPosition
PatientSex
PercentPhaseFOV
PhaseEncodingSteps
PhaseResolution
PixelBandwidth
ProcedureStepDescription
ProtocolName
PulseSequenceDetails
ReceiveCoilName
ReconMatrixPE
ReferencesAndLinks
RepetitionTime
SAR
ScanOptions
ScanningSequence
SequenceName
SequenceVariant
SeriesDescription
SeriesInstanceUID
SeriesNumber
ShimSetting
SliceThickness
SoftwareVersions
StationName
StudyID
StudyInstanceUID
TxRefAmp
template
Acknowledgements
AcquisitionDateTime
AcquisitionMatrixPE
AcquisitionNumber
AcquisitionTime
Authors
BIDSVersion
BandwidthPerPixelPhaseEncode
BaseResolution
CoilString
ConversionSoftware
ConversionSoftwareVersion
DatasetDOI
DeidentificationMethod
DerivedVendorReportedEchoSpacing
DeviceSerialNumber
DwellTime
EchoNumber
EchoTime
EchoTime1
EchoTime2
EffectiveEchoSpacing
FlipAngle
Funding
HowToAcknowledge
ImageOrientationPatientDICOM
ImageType
ImagingFrequency
InPlanePhaseEncodingDirectionDICOM
InstitutionAddress
InstitutionName
InstitutionalDepartmentName
IntendedFor
InversionTime
License
MRAcquisitionType
MagneticFieldStrength
Manufacturer
ManufacturersModelName
Modality
Name
ParallelReductionFactorInPlane
PartialFourier
PatientPosition
PatientSex
PercentPhaseFOV
PhaseEncodingDirection
PhaseEncodingSteps
PhaseResolution
PixelBandwidth
ProcedureStepDescription
ProtocolName
PulseSequenceDetails
ReceiveCoilName
ReconMatrixPE
RefLinesPE
ReferencesAndLinks
RepetitionTime
SAR
ScanOptions
ScanningSequence
SequenceName
SequenceVariant
SeriesDescription
SeriesInstanceUID
SeriesNumber
ShimSetting
SliceThickness
SliceTiming
SoftwareVersions
SpacingBetweenSlices
StationName
StudyID
StudyInstanceUID
TaskName
TotalReadoutTime
TxRefAmp
template
Acknowledgements
AcquisitionDateTime
AcquisitionMatrixPE
AcquisitionNumber
AcquisitionTime
Authors
BIDSVersion
BandwidthPerPixelPhaseEncode
BaseResolution
ConversionSoftware
ConversionSoftwareVersion
DatasetDOI
DeidentificationMethod
DerivedVendorReportedEchoSpacing
DeviceSerialNumber
DwellTime
EchoNumber
EchoTime
EchoTime1
EchoTime2
EffectiveEchoSpacing
FlipAngle
Funding
HowToAcknowledge
ImageOrientationPatientDICOM
ImageType
ImagingFrequency
InPlanePhaseEncodingDirectionDICOM
InstitutionAddress
InstitutionName
InstitutionalDepartmentName
IntendedFor
InversionTime
License
MRAcquisitionType
MagneticFieldStrength
Manufacturer
ManufacturersModelName
Modality
Name
ParallelReductionFactorInPlane
PartialFourier
PatientPosition
PatientSex
PercentPhaseFOV
PhaseEncodingDirection
PhaseEncodingSteps
PhaseResolution
PixelBandwidth
ProcedureStepDescription
ProtocolName
PulseSequenceDetails
ReceiveCoilName
ReconMatrixPE
RefLinesPE
ReferencesAndLinks
RepetitionTime
SAR
ScanOptions
ScanningSequence
SequenceName
SequenceVariant
SeriesDescription
SeriesInstanceUID
SeriesNumber
ShimSetting
SliceThickness
SliceTiming
SoftwareVersions
SpacingBetweenSlices
StationName
StudyID
StudyInstanceUID
TaskName
TotalReadoutTime
TxRefAmp
template
Acknowledgements
AcquisitionDateTime
AcquisitionMatrixPE
AcquisitionNumber
AcquisitionTime
Authors
BIDSVersion
BandwidthPerPixelPhaseEncode
BaseResolution
CoilString
ConversionSoftware
ConversionSoftwareVersion
DatasetDOI
DeidentificationMethod
DerivedVendorReportedEchoSpacing
DeviceSerialNumber
DwellTime
EchoNumber
EchoTime
EchoTime1
EchoTime2
EffectiveEchoSpacing
FlipAngle
Funding
HowToAcknowledge
ImageOrientationPatientDICOM
ImageType
ImagingFrequency
InPlanePhaseEncodingDirectionDICOM
InstitutionAddress
InstitutionName
InstitutionalDepartmentName
IntendedFor
InversionTime
License
MRAcquisitionType
MagneticFieldStrength
Manufacturer
ManufacturersModelName
Modality
Name
ParallelReductionFactorInPlane
PartialFourier
PatientPosition
PatientSex
PercentPhaseFOV
PhaseEncodingDirection
PhaseEncodingSteps
PhaseResolution
PixelBandwidth
ProcedureStepDescription
ProtocolName
PulseSequenceDetails
ReceiveCoilName
ReconMatrixPE
RefLinesPE
ReferencesAndLinks
RepetitionTime
SAR
ScanOptions
ScanningSequence
SequenceName
SequenceVariant
SeriesDescription
SeriesInstanceUID
SeriesNumber
ShimSetting
SliceThickness
SliceTiming
SoftwareVersions
SpacingBetweenSlices
StationName
StudyID
StudyInstanceUID
TaskName
TotalReadoutTime
TxRefAmp
template
Acknowledgements
AcquisitionDateTime
AcquisitionMatrixPE
AcquisitionNumber
AcquisitionTime
Authors
BIDSVersion
BandwidthPerPixelPhaseEncode
BaseResolution
CoilString
ConversionSoftware
ConversionSoftwareVersion
DatasetDOI
DeidentificationMethod
DerivedVendorReportedEchoSpacing
DeviceSerialNumber
DwellTime
EchoNumber
EchoTime
EchoTime1
EchoTime2
EffectiveEchoSpacing
FlipAngle
Funding
HowToAcknowledge
ImageOrientationPatientDICOM
ImageType
ImagingFrequency
InPlanePhaseEncodingDirectionDICOM
IntendedFor
License
MRAcquisitionType
MagneticFieldStrength
Manufacturer
ManufacturersModelName
Modality
Name
PartialFourier
PatientPosition
PatientSex
PercentPhaseFOV
PhaseEncodingDirection
PhaseEncodingSteps
PhaseResolution
PixelBandwidth
ProcedureStepDescription
ProtocolName
PulseSequenceDetails
ReceiveCoilName
ReconMatrixPE
RefLinesPE
ReferencesAndLinks
RepetitionTime
SAR
ScanOptions
ScanningSequence
SequenceName
SequenceVariant
SeriesDescription
SeriesInstanceUID
SeriesNumber
ShimSetting
SliceThickness
SliceTiming
SoftwareVersions
SpacingBetweenSlices
StudyID
StudyInstanceUID
TaskName
TotalReadoutTime
TxRefAmp
template
Acknowledgements
AcquisitionDateTime
AcquisitionMatrixPE
AcquisitionNumber
AcquisitionTime
Authors
BIDSVersion
BandwidthPerPixelPhaseEncode
BaseResolution
ConversionSoftware
ConversionSoftwareVersion
DatasetDOI
DerivedVendorReportedEchoSpacing
DeviceSerialNumber
EchoNumber
EchoTime
EffectiveEchoSpacing
FlipAngle
Funding
HowToAcknowledge
ImageOrientationPatientDICOM
ImageType
ImagingFrequency
InPlanePhaseEncodingDirectionDICOM
IntendedFor
InversionTime
License
MRAcquisitionType
MagneticFieldStrength
Manufacturer
ManufacturersModelName
Modality
Name
PartialFourier
PatientPosition
PatientSex
PercentPhaseFOV
PhaseEncodingDirection
PhaseEncodingSteps
PhaseResolution
PixelBandwidth
ProcedureStepDescription
ProtocolName
PulseSequenceDetails
ReceiveCoilName
ReconMatrixPE
RefLinesPE
ReferencesAndLinks
RepetitionTime
SAR
ScanOptions
ScanningSequence
SequenceName
SequenceVariant
SeriesDescription
SeriesInstanceUID
SeriesNumber
ShimSetting
SliceThickness
SliceTiming
SoftwareVersions
SpacingBetweenSlices
StudyID
StudyInstanceUID
TaskName
TotalReadoutTime
TxRefAmp
template
Acknowledgements
AcquisitionDateTime
AcquisitionMatrixPE
AcquisitionNumber
AcquisitionTime
Authors
BIDSVersion
BandwidthPerPixelPhaseEncode
BaseResolution
CoilString
ConversionSoftware
ConversionSoftwareVersion
DatasetDOI
DeidentificationMethod
DerivedVendorReportedEchoSpacing
DeviceSerialNumber
DwellTime
EchoNumber
EchoTime
EchoTime1
EchoTime2
EffectiveEchoSpacing
FlipAngle
Funding
HowToAcknowledge
ImageComments
ImageOrientationPatientDICOM
ImageType
ImagingFrequency
InPlanePhaseEncodingDirectionDICOM
InstitutionAddress
InstitutionName
InstitutionalDepartmentName
IntendedFor
License
MRAcquisitionType
MagneticFieldStrength
Manufacturer
ManufacturersModelName
Modality
MultibandAccelerationFactor
Name
ParallelReductionFactorInPlane
PartialFourier
PatientPosition
PatientSex
PercentPhaseFOV
PhaseEncodingDirection
PhaseEncodingSteps
PhaseResolution
PixelBandwidth
ProcedureStepDescription
ProtocolName
PulseSequenceDetails
ReceiveCoilName
ReconMatrixPE
RefLinesPE
ReferencesAndLinks
RepetitionTime
SAR
ScanOptions
ScanningSequence
SequenceName
SequenceVariant
SeriesDescription
SeriesInstanceUID
SeriesNumber
ShimSetting
SliceThickness
SliceTiming
SoftwareVersions
SpacingBetweenSlices
StationName
StudyID
StudyInstanceUID
TaskName
TotalReadoutTime
TxRefAmp
template

"""</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>
</code></pre></div></div><h2 id="anonymization"> <a href="#anonymization" class="anchor-heading" aria-labelledby="anonymization"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Anonymization</h2><p>Using <code class="language-plaintext highlighter-rouge">bond-print-metadata-fields</code>, we found the following fields in JSON sidecars:</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">set</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'',
 'Acknowledgements',
 'AcquisitionDateTime',
 'AcquisitionMatrixPE',
 'AcquisitionNumber',
 'AcquisitionTime',
 'Authors',
 'BIDSVersion',
 'BandwidthPerPixelPhaseEncode',
 'BaseResolution',
 'CoilString',
 'ConversionSoftware',
 'ConversionSoftwareVersion',
 'DatasetDOI',
 'DeidentificationMethod',
 'DerivedVendorReportedEchoSpacing',
 'DeviceSerialNumber',
 'DwellTime',
 'EchoNumber',
 'EchoTime',
 'EchoTime1',
 'EchoTime2',
 'EchoTrainLength',
 'EffectiveEchoSpacing',
 'FlipAngle',
 'Funding',
 'HowToAcknowledge',
 'ImageComments',
 'ImageOrientationPatientDICOM',
 'ImageType',
 'ImagingFrequency',
 'InPlanePhaseEncodingDirectionDICOM',
 'InstitutionAddress',
 'InstitutionName',
 'InstitutionalDepartmentName',
 'IntendedFor',
 'InversionTime',
 'License',
 'MRAcquisitionType',
 'MagneticFieldStrength',
 'Manufacturer',
 'ManufacturersModelName',
 'Modality',
 'MultibandAccelerationFactor',
 'Name',
 'ParallelReductionFactorInPlane',
 'PartialFourier',
 'PatientPosition',
 'PatientSex',
 'PercentPhaseFOV',
 'PhaseEncodingDirection',
 'PhaseEncodingSteps',
 'PhaseResolution',
 'PixelBandwidth',
 'ProcedureStepDescription',
 'ProtocolName',
 'PulseSequenceDetails',
 'ReceiveCoilName',
 'ReconMatrixPE',
 'RefLinesPE',
 'ReferencesAndLinks',
 'RepetitionTime',
 'SAR',
 'ScanOptions',
 'ScanningSequence',
 'SequenceName',
 'SequenceVariant',
 'SeriesDescription',
 'SeriesInstanceUID',
 'SeriesNumber',
 'ShimSetting',
 'SliceThickness',
 'SliceTiming',
 'SoftwareVersions',
 'SpacingBetweenSlices',
 'StationName',
 'StudyID',
 'StudyInstanceUID',
 'TaskName',
 'TotalReadoutTime',
 'TxRefAmp',
 'template'}
</code></pre></div></div><p>Below is the list of fields that were removed using <code class="language-plaintext highlighter-rouge">bond-remove-metadata-fields</code>:</p><p><code class="language-plaintext highlighter-rouge">AcquisitionDateTime AcquisitionTime InstitutionAddress InstitutionName InstitutionalDepartmentName Name PatientPosition PatientSex StationName StudyID StudyInstanceUID</code></p><p>After these data were removed, we made a copy of the datasets and tracked the copy in <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/working/bidsdatasets</code>.</p><h1 id="curation"> <a href="#curation" class="anchor-heading" aria-labelledby="curation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Curation</h1><p>The majority of curation was accomplished by Anna on Flywheel. Early versions of her <code class="language-plaintext highlighter-rouge">fw-heudiconv</code> heuristics are available <a href="https://github.com/PennLINC/Reward/tree/gh-pages/oldScripts/annaHeuristics2019">here</a>. However, we found that when trying to export data from the project, Flywheel ran into errors due to slight curation issues. For e.g. in many cases, two or more NIfTIs had the same BIDS filename due to:</p><ul><li>Duplication of an acquisition e.g. multiple T1w scans to account for a poor first attempt<li>Duplication of NIfTIs output from <code class="language-plaintext highlighter-rouge">dcm2nixx</code> e.g. a phase1-phase2 DICOM producing 3 NIfTIs<li>Heuristic not parsing reconstructed data e.g. T1w and T1w-MOCO<li>Unexpected Diffusion scans produced by Seimens scanner (derived measures)</ul><p>A CSV tracking these decisions is available on CUBIC in <code class="language-plaintext highlighter-rouge">working/code/flywheel_transfer/duplicates_07062021.tsv</code>. In most cases, it sufficed to remove the offending duplicates’ NIfTI (DICOMs remain intact). In the remaining cases, we adjusted Anna’s heuristic to account for the changes. The updated versions of the heuristics are available in the <a href="https://github.com/PennLINC/Reward/tree/master/Scripts">Scripts</a> directory.</p><blockquote><p><strong><em>NOTE:</em></strong> We have yet to move any ASL to CUBIC due to the curation of ASL requiring much more involved work like acquiring scanner parameters from the technicians who ran the scans.</p></blockquote><p>Once moved to CUBIC, we found very few BIDS validation errors. When using <code class="language-plaintext highlighter-rouge">bond-validate</code> with the <code class="language-plaintext highlighter-rouge">--ignore_subject_consistency</code> and <code class="language-plaintext highlighter-rouge">--ignore_nifti_headers</code> flags, we only had to account for the <code class="language-plaintext highlighter-rouge">dataset_description</code> and <code class="language-plaintext highlighter-rouge">README</code> files. These were fixed and tracked in datalad.</p><hr><footer><p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2017-2019 Patrick Marsceill. Distributed by an <a href="https://github.com/PennLINC/PennLINC.github.io/tree/master/LICENSE.txt">MIT license.</a></p></footer></div></div><div class="search-overlay"></div></div>
