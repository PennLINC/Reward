<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2709176-10"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2709176-10'); </script> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Data Narrative | Reward Project Documentation</title><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Data Narrative" /><meta property="og:locale" content="en_US" /><meta name="description" content="Documentation of Reward Data Processing and Analysis" /><meta property="og:description" content="Documentation of Reward Data Processing and Analysis" /><link rel="canonical" href="http://localhost:4000/projects/fndm1/datanarrative/" /><meta property="og:url" content="http://localhost:4000/projects/fndm1/datanarrative/" /><meta property="og:site_name" content="Reward Project Documentation" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Data Narrative" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Documentation of Reward Data Processing and Analysis","headline":"Data Narrative","url":"http://localhost:4000/projects/fndm1/datanarrative/"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> Reward Project Documentation </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">Home</a><li class="nav-list-item"><a href="http://localhost:4000/anna/" class="nav-list-link">Legacy Curation (2018-2020)</a><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/projects/neff/neff_index/" class="nav-list-link">NEFF V1 & V2</a><ul class="nav-list "></ul><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/projects/fndm1/fndm1_index/" class="nav-list-link">FNDM1</a><ul class="nav-list "><li class="nav-list-item active"><a href="http://localhost:4000/projects/fndm1/datanarrative/" class="nav-list-link active">Data Narrative</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/projects/fndm2/fndm2_index/" class="nav-list-link">FNDM2</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/projects/fndm2/datanarrative/" class="nav-list-link">Data Narrative</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/projects/nodra/nodra_index/" class="nav-list-link">Nodra</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/projects/nodra/datanarrative/" class="nav-list-link">Data Narrative</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/projects/day2/day2_index/" class="nav-list-link">Day2</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/projects/day2/datanarrative/" class="nav-list-link">Data Narrative</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/projects/cogtrain/cogtrain_index/" class="nav-list-link">CogTrain</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/projects/cogtrain/datanarrative/" class="nav-list-link">Data Narrative</a><li class="nav-list-item "><a href="http://localhost:4000/projects/cogtrain/itc_task_events/" class="nav-list-link">ITC Task Events</a></ul></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Reward Project Documentation" aria-label="Search Reward Project Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="//github.com/PennLINC/Reward" class="site-button" > Edit on GitHub </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/projects/fndm1/fndm1_index/">FNDM1</a><li class="breadcrumb-nav-list-item"><span>Data Narrative</span></ol></nav><div id="main-content" class="main-content" role="main"><h1 class="no_toc" id="fndm1"> <a href="#fndm1" class="anchor-heading" aria-labelledby="fndm1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> FNDM1</h1><details open=""> <summary class="text-delta"> Table of contents </summary><ol id="markdown-toc"><li><a href="#data-processing-flow--important-links" id="markdown-toc-data-processing-flow--important-links">Data Processing Flow &amp; Important Links:</a><li><a href="#plan-for-the-data" id="markdown-toc-plan-for-the-data">Plan for the Data</a><li><a href="#data-acquisition" id="markdown-toc-data-acquisition">Data Acquisition</a><li><a href="#download-and-storage" id="markdown-toc-download-and-storage">Download and Storage</a><li><a href="#curation-process" id="markdown-toc-curation-process">Curation Process</a><ol><li><a href="#bids-validation" id="markdown-toc-bids-validation">BIDS Validation:</a><li><a href="#bids-optimization" id="markdown-toc-bids-optimization">BIDS Optimization:</a></ol><li><a href="#preprocessing-pipelines" id="markdown-toc-preprocessing-pipelines">Preprocessing Pipelines</a><ol><li><a href="#fmriprep-version-2023" id="markdown-toc-fmriprep-version-2023">fMRIPrep (version 20.2.3)</a><ol><li><a href="#exemplar-testing" id="markdown-toc-exemplar-testing">Exemplar Testing:</a><li><a href="#production-testing" id="markdown-toc-production-testing">Production Testing:</a></ol><li><a href="#xcp-abcd-version-008" id="markdown-toc-xcp-abcd-version-008">XCP-ABCD (version 0.0.8)</a><ol><li><a href="#production-testing-1" id="markdown-toc-production-testing-1">Production Testing:</a></ol></ol><li><a href="#post-processing" id="markdown-toc-post-processing">Post Processing</a><ol><li><a href="#to-do" id="markdown-toc-to-do">To Do</a></ol></ol></details><h1 id="data-processing-flow--important-links"> <a href="#data-processing-flow--important-links" class="anchor-heading" aria-labelledby="data-processing-flow--important-links"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Data Processing Flow &amp; Important Links:</h1><ul><li>Flow diagram that describes the lifecycle of this dataset curation and preprocessing:</ul><p><img src="../DataProcessingFlow_fndm1.drawio.svg" alt="flow" /></p><ul><li>DSR GitHub Project Page(Curation/Validation and Processing Queue Status):</ul><p><a href="https://github.com/PennLINC/Reward/projects/1">https://github.com/PennLINC/Reward/projects/1</a></p><h1 id="plan-for-the-data"> <a href="#plan-for-the-data" class="anchor-heading" aria-labelledby="plan-for-the-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Plan for the Data</h1><ul><li>Why does PennLINC need this data?<blockquote><p>Acquired at UPenn</p></blockquote><li>For which project(s) is it intended? Please link to project pages below:<blockquote><p><a href="https://github.com/PennLINC/Reward/">Reward Project</a></p></blockquote><li>Goal:<blockquote><p>Curate and preprocess an amalgam of datasets for a harmonized PennLINC resource</p></blockquote></ul><h1 id="data-acquisition"> <a href="#data-acquisition" class="anchor-heading" aria-labelledby="data-acquisition"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Data Acquisition</h1><ul><li>Data acquired by Dan Wolf &amp; Ted Satterthwaite<li>Describe the data:<ul><li>number of subjects = 56<li>types of images = bold (2 runs task-CARD, 2 runs task-FACE, rest), T1w, fieldmaps</ul></ul><h1 id="download-and-storage"> <a href="#download-and-storage" class="anchor-heading" aria-labelledby="download-and-storage"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Download and Storage</h1><ul><li>Original data available on Flywheel<li>Source data (NIfTI) on CUBIC in <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/original_data/bidsdatasets/fndm1</code>.<li>Data was copied to <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Curation/bidsdatasets/fndm1</code> and checked in to <code class="language-plaintext highlighter-rouge">datalad</code> after removing PHI (below)<li><p>JSON’s within origial_data were updated using <code class="language-plaintext highlighter-rouge">cubids-add-nifti-info</code>.</p><li>Listing metadata fields using <code class="language-plaintext highlighter-rouge">cubids-print-metadata-fields</code> gave the following fields:</ul><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Acknowledgements
AcquisitionDateTime
AcquisitionMatrixPE
AcquisitionNumber
AcquisitionTime
Authors
BIDSVersion
BandwidthPerPixelPhaseEncode
BaseResolution
CoilString
ConversionSoftware
ConversionSoftwareVersion
DatasetDOI
DeidentificationMethod
DerivedVendorReportedEchoSpacing
DeviceSerialNumber
DwellTime
EchoNumber
EchoTime
EchoTime1
EchoTime2
EchoTrainLength
EffectiveEchoSpacing
FlipAngle
Funding
HowToAcknowledge
ImageOrientationPatientDICOM
ImageType
ImagingFrequency
InPlanePhaseEncodingDirectionDICOM
InstitutionAddress
InstitutionName
InstitutionalDepartmentName
IntendedFor
InversionTime
License
MRAcquisitionType
MagneticFieldStrength
Manufacturer
ManufacturersModelName
Modality
Name
ParallelReductionFactorInPlane
PartialFourier
PatientPosition
PatientSex
PercentPhaseFOV
PhaseEncodingDirection
PhaseEncodingSteps
PhaseResolution
PixelBandwidth
ProcedureStepDescription
ProtocolName
PulseSequenceDetails
ReceiveCoilName
ReconMatrixPE
RefLinesPE
ReferencesAndLinks
RepetitionTime
SAR
ScanOptions
ScanningSequence
SequenceName
SequenceVariant
SeriesDescription
SeriesInstanceUID
SeriesNumber
ShimSetting
SliceThickness
SliceTiming
SoftwareVersions
SpacingBetweenSlices
StationName
StudyID
StudyInstanceUID
TaskName
TotalReadoutTime
TxRefAmp
template
ImageComments
MultibandAccelerationFactor
</code></pre></div></div><p>Offending fields were removed with <code class="language-plaintext highlighter-rouge">cubids-remove-metadata-fields</code> in <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Curation/code/metadatafields_remove.sh</code></p><h1 id="curation-process"> <a href="#curation-process" class="anchor-heading" aria-labelledby="curation-process"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Curation Process</h1><ul><li>Data curation by Tinashe Tapera on the CUBIC project user <code class="language-plaintext highlighter-rouge">wolfsatterthwaitereward</code><li>Link to final CuBIDS csvs: <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Curation/code/iterations/iteration7/fndm1/</code></ul><h2 id="bids-validation"> <a href="#bids-validation" class="anchor-heading" aria-labelledby="bids-validation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> BIDS Validation:</h2><ul><li><p>Data with short bold time series (&lt;3mins) were removed with the Notebook <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Curation/code/RemoveShortBOLD.ipynb</code></p><li><p>All validation outputs are available in chronological order in <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Curation/code/validate_outputs/fndm1</code>; most recent validation errors being:</p><ul><li><p>EVENTS_TSV_MISSING ( Task scans should have a corresponding events.tsv file. If this is a resting state scan you can ignore this warning or rename the task to include the word “rest”. ) : 224 counts</p><li><p>README_FILE_MISSING ( The recommended file /README is missing. See Section 03 (Modality agnostic files) of the BIDS specification. ) : 1 count</p><li><p>NO_AUTHORS ( The Authors field of dataset_description.json should contain an array of fields - with one author per field. This was triggered because there are no authors, which will make DOI registration from dataset metadata impossible. ) : 1 count</p></ul></ul><p>Data at this stage were approved for preprocessing.</p><h2 id="bids-optimization"> <a href="#bids-optimization" class="anchor-heading" aria-labelledby="bids-optimization"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> BIDS Optimization:</h2><ul><li><p>All cubids optimization results are available in <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Curation/code/iterations/iter&lt;ITERATION_NUMBER&gt;/fndm1/</code></p><li><p>Final optimization resulted in <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Curation/code/iterations/iter7/fndm1/fndm1_summary.csv</code></p></ul><h1 id="preprocessing-pipelines"> <a href="#preprocessing-pipelines" class="anchor-heading" aria-labelledby="preprocessing-pipelines"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Preprocessing Pipelines</h1><h2 id="fmriprep-version-2023"> <a href="#fmriprep-version-2023" class="anchor-heading" aria-labelledby="fmriprep-version-2023"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> fMRIPrep (version 20.2.3)</h2><ul><li>Tinashe Tapera was responsible for running preprocessing pipelines/audits on CUBIC</ul><h3 id="exemplar-testing"> <a href="#exemplar-testing" class="anchor-heading" aria-labelledby="exemplar-testing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exemplar Testing:</h3><ul><li>Used cubids to create exemplar dataset: <code class="language-plaintext highlighter-rouge">cubids-copy-exemplars /cbica/projects/wolf_satterthwaite_reward/Curation/bidsdatasets/fndm1/BIDS /cbica/projects/wolf_satterthwaite_reward/Testing/fndm1/exemplars_dir /cbica/projects/wolf_satterthwaite_reward/Curation/code/iterations/iter7/fndm1/fndm1_AcqGrouping.csv</code><li>Path to exemplar dataset (annexed to datalad): <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Testing/fndm1/exemplars_dir</code><li><p>Path to fmriprep container: Original in <code class="language-plaintext highlighter-rouge">~/dropbox</code>, datalad in <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Testing/exemplars_test/fmriprep-container</code></p><li>Adjustments:<ul><li>During testing, some fieldmaps were found to be corrupt/unusable for the data, and were removed. These files are in <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Curation/code/iterations/cubids-testing_adjustments/fndm1/purge_broken_fmaps.txt</code></ul></ul><p>Testing directory was deleted to save space on CUBIC on 12/2/21, once production completed</p><h3 id="production-testing"> <a href="#production-testing" class="anchor-heading" aria-labelledby="production-testing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Production Testing:</h3><ul><li>52/56 subjects completed fMRIPrep successfully<li>Path to production inputs: <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Curation/bidsdatasets/fndm1/BIDS</code><li>Path to fmriprep run command: <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Production/fndm1/fmriprep/analysis/code/fmriprep_zip.sh</code><li>Path to production outputs: <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Production/fndm1/fmriprep/output_ria</code><li>Path to fmriprep production audit: <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Production/fndm1/fmriprep/-audit/FMRIPREP_AUDIT.csv</code><li>Path to freesurfer production audit: NA</ul><h2 id="xcp-abcd-version-008"> <a href="#xcp-abcd-version-008" class="anchor-heading" aria-labelledby="xcp-abcd-version-008"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> XCP-ABCD (version 0.0.8)</h2><h3 id="production-testing-1"> <a href="#production-testing-1" class="anchor-heading" aria-labelledby="production-testing-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Production Testing:</h3><ul><li>52/56 subjects completed XCP successfully<li>Path to production inputs: <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Curation/bidsdatasets/fndm1/fmriprep/merge_ds</code><li>Path to xcp run command: <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Production/fndm1/xcp/analysis/code/xcp_zip.sh</code><li>Path to production outputs: <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Production/fndm1/xcp/output_ria</code><li>Path to xcp production audit: NA<li>Path to xcp derivatives: <code class="language-plaintext highlighter-rouge">/cbica/projects/wolf_satterthwaite_reward/Production/fndm1/xcp-derivatives/XCP</code><li>Path to xcp derivatives (concatenated): NA</ul><h1 id="post-processing"> <a href="#post-processing" class="anchor-heading" aria-labelledby="post-processing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Post Processing</h1><ul><li>Who is using the data/for which projects are people in the lab using this data?<ul><li>Link to project page(s) here</ul><li>For each post-processing analysis that has been run on this data, fill out the following<ul><li>Who performed the analysis?<li>Where it was performed (CUBIC, PMACS, somewhere else)?<li>GitHub Link(s) to result(s)<li>Did you use pennlinckit?<ul><li>https://github.com/PennLINC/PennLINC-Kit/tree/main/pennlinckit</ul></ul></ul><h3 id="to-do"> <a href="#to-do" class="anchor-heading" aria-labelledby="to-do"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> To Do</h3><ul><li>backup to PMACS<li>Add task events files</ul><hr><footer><p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2017-2019 Patrick Marsceill. Distributed by an <a href="https://github.com/PennLINC/PennLINC.github.io/tree/master/LICENSE.txt">MIT license.</a></p></footer></div></div><div class="search-overlay"></div></div>
